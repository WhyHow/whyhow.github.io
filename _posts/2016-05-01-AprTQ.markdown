---
author: YiYin
comments: true
date: 2016-05-01 11:11:09 +0800
layout: post
slug: AprTQ
title: 天行健，地势坤——四月里上海的残忍天气
categories: [行]
tags:
-  上海
-  生活
-  四月
-  天气
-  ggplot
-  数据
-  统计
-  可视化

---

虽然在上海生活了数十年，但每次被人问起上海的气候，还总是一脸茫然：“冬天很冷吗？”“还好吧……不太冷”“夏天很热吗？”“还……还好吧，也并不总是高温”“一直下雨吗？”“没那么夸张吧……晴天还是很多的。”“雨季是啥时候？”“夏天吧……还有梅雨季……好像秋天也算……”

尽管印象里上海的气候还是不错的：四季分明，春秋宜人；冬天很少破冰点，夏日也不算大火炉；水汽充沛，但爽朗的日子也不少……可在今冬经历了几次温度大震荡以及数度被大雨浇在下班路上后，最近还是越来越怀疑上海天气的真实情况了。鉴于没有找到好用的国内天气历史数据的公开资源，干脆自己动手每天记录当日天气。坚持了足足一月，今天可以来看看过去的这个四月天，上海的天气究竟是啥摸样了。

记录的气象数据来自“360天气手机app”，其预报数据据称来自“中国天气网”，每日的记录项包括：最高温、最低温、日间气象、夜间气象、风向、风力、日出时间、日落时间、湿度、天气预警。其中，最高温、最低温、日间气象、夜间气象、风向和风力为既成事实的数据（也即每天记录时的“昨日天气”）；日出时间、日落时间为当日数据；湿度为记录时的实时数据（都是每日午前大白天差不多时间点上。有时一天湿度变化也比较大，该数据仅供参考）。天气预警为每天发布过的各类预警的最高级。

<hr/>

首先看气温。在三月上旬的时候曾在本站发布过[今冬上海诡异的温度曲线](http://whyhow.github.io/2016/03/09/tianqi.html)，进入四月，到底是花开了，气温的极低值有了明显上升，虽然曲线依旧急上急下，但振幅倒是小了。相比最高温度，最低温度的变化更为稳定一些。另外，这不是“是爱，是暖，
是希望”的“人间四月天”么？咋从头到尾这温度就没啥大长进呢？亏得四月的最后两天留下了个光明的尾巴和希望的种子。

![](/public/images/Apr/ondo.png)

接着看每天的气象。若是没有这最后两天，整个四月里就只剩一个独孤的晴天，而且还是一个晴朗的夜晚！而这最后两天，虽然是晴天，但都是污染天，与其说“晴”，不如称“霾”。也就是这一整个月，上海的大白天都几乎不带放晴的。各种雨加在一起，差不多主宰了全月的气象，但多云的时候也不算少。雨和雨相比，小雨最多，阵雨最少；晚间的雨比白日的雨更频繁一些；三次大雨都在夜间，算是万幸。大部分日子里早晚气象都不相同，全天气象稳定的日子绝大部分是多云天，此外就是下了一天小雨。

![](/public/images/Apr/tenkou.png)

![](/public/images/Apr/tenkou2.png)

上面两张图里看上海的雨天比例还不太直观。我们来换个方式：一天里无论日夜，只要下过雨（大雨、中雨、小雨、阵雨）就算这日有雨；日夜都是多云或者阴天，这天就算多云；全天晴当然是晴天，半天是晴天半天是多云也算是晴天；半天晴半天阴就折中一下算多云。这样每日的天气概览如下图，顺带画上了湿度的信息：

![](/public/images/Apr/tenkouall.png)

压倒性的雨天啊！我以后再也不跟人说“上海其实晴天也挺多的”了。还有这湿度，40%起呀，直逼100%的日子也不少。看下图，这四分之三的日子的湿度都在100%的四分之三以上：

![](/public/images/Apr/humi.png)

接着是日出日落的时间。虽然并不是每天日出早一分、每晚日落晚一分。但整体趋势是稳健的，除了特殊到刺目的4月8日。当时记录的时候就发现了这天的日落信息不对劲，也不知是数据错误还是的确如此。

![](/public/images/Apr/taiyo.png)

话说太阳每天都在更努力地工作，可这气温变化跟不上呀。确实是“天行健”，然而“地势坤”。

再来看看风的情况吧。风力上，0-3级的微风主宰，3-4级偶发，更大的风不曾出现。这和体感有些区别，我是明显得觉得有几天的风好大好大的。风向上，春天的气流挺混乱的，东南西北“六”方来风。东南风的日子更多些。

![](/public/images/Apr/wind.png)

最后是天气预警。一个月里发过七次警报：大雾、大风、暴雨、雷电都有过。大部分是黄色级别，一次大雾是橙色；大风只有一次，蓝色的。

![](/public/images/Apr/alert.png)

顺便把警报和气象、风向、风力、湿度画一起看看。三次大雾警报都是多云天，四次其他警报（风、雷、电）都是雨天，嘛，这也是自然的。所有有预警的日子，湿度都高得反人类。

![](/public/images/Apr/alert1.png)

总结：果然四月是最残忍的季节。一个月里光有风风雨雨、电闪雷鸣，气温原地踏步；日出渐早、日落渐晚，但芳容难得一见。好在四月末的两天，虽然空气污染指数都是三位数，但是能看见太阳了，温度也像春天了，希望这确实是向气温的全面复苏进军的号角。

最后吐个嘈：ggplot用起来的时候是爽，之前处理数据框却是烦。用医学术语，这道工序可算是“备皮”了。